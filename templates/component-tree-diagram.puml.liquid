@startuml
skinparam linetype polyline

/'
left to right direction
skinparam linetype ortho
'/

frame "{{architecture.description}} Component Tree Diagram" {

{% for component_hash in architecture.components %}
  {% for component in component_hash %}
    {% if component.description %}
    ["{{component.description}}"]
    {% for subsystem_hash in component.components %}
      {% for subsystem in subsystem_hash %}
        {% if subsystem.description %}
        ["{{component.description}}"] +-- ["{{subsystem.description}}"]
        {% for subsystemcomponent_hash in subsystem.components %}
          {% for subsystemcomponent in subsystemcomponent_hash %}
            {% if subsystemcomponent.description %}
            ["{{subsystem.description}}"] +-- ["{{subsystemcomponent.description}}"]
            {% endif %}
          {% endfor %}
        {% endfor %}
        {% endif %}
      {% endfor %}
    {% endfor %}
    {% endif %}
  {% endfor %}
{% endfor %}

}
@enduml
